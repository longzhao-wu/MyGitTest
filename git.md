## Git笔记

**版本控制**，**主动提交**，**中央仓库**这三个要素共同构成了版本控制系统VCS的核心：开发团队中的每个人向中央仓库主动提交自己的改动和同步别人的改动，并在需要的时候查看和操作历史版本，这就是版本控制系统。

### 分布式VCS的工作模型：

1. 首先，你作为主工程师，独立搭建了项目架构，**并把这些代码提交到了本地仓库**；

2. 然后，你在服务器上创建了一个中央仓库，并把 1 中的提交**从本地仓库推送到了服务器的中央仓库**；

3. 其他同事**把中央仓库的所有内容克隆到本地，拥有了各自的本地仓库**，从此刻开始，你们三人开始并行开发

4. 在之后的开发过程中，你们三人总是每人独立负责开发一个功能，在这个功能开发过程中，**一个人会把它的每一步改动提交到本地仓库**。注意：由于本地提交无需立即上传到中央仓库，所以每一步提交不必是一个完整功能，而可以是功能中的一个步骤或块。

5. 在一个人把某个功能开发完成之后，他就可以把这个功能相关的所有提交**从本地仓库推送到中央仓库**；

6. 每次当有人把新的提交推送到中央仓库的时候，另外两个人就可以选择**把这些提交同步到自己的机器上，并把它们和自己的本地代码合并**。

   .git目录即为本地仓库，index文件中存在着git add暂存的内容 git log 可以看到提交历史。

   **staging area**：暂存区（汇集待提交的文件改动的地方）git add 命令将文件从未跟踪状态转变为staged已暂存状态。

   ![image-20220725213303650](C:\Users\吴龙照\AppData\Roaming\Typora\typora-user-images\image-20220725213303650.png)

`origin/master` 的中的 `origin` 是远端仓库的名称，是你在用 `clone` 指令初始化本地仓库时 Git 自动帮你起的默认名称；`master` 是 `origin` 上的分支名称。不过对于现在来说，可以暂时把 `origin/master` 简单理解为「中央仓库」。上面图片中也就是在说本地仓库已经领先中央仓库两个提交了。

git add 改动文件提交至暂存区  git status 查看当前状态  git log查看提交历史 git commit 提交至本地仓库 git push 推送至远程中央仓库。

![image-20220725214125724](C:\Users\吴龙照\AppData\Roaming\Typora\typora-user-images\image-20220725214125724.png)

push冲突：远程仓库含有本地没有的commits，会导致本地git push失败。这是因为 Git 的`push` 其实是用本地仓库的 commits 记录去覆盖远端仓库的 commits 记录（注：这是简化概念后的说法，push 的实质和这个说法略有不同），而如果在远端仓库含有本地没有的 commits 的时候，`push` （如果成功）将会导致远端的 commits 被擦掉。这种结果当然是不可行的，因此 Git 会在 `push` 的时候进行检查，如果出现这样的情况，push 就会失败。

push前先pull，**先用 `pull` 把远端仓库上的新内容取回到本地和本地合并，然后再把合并后的本地仓库向远端仓库推送**。
